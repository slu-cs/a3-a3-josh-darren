<head>
    <meta charset="utf-8">
    <title>Making Poll</title>
</head>
<body>

  <form id="initial">
    <p> Enter the Question</p>
    <input type="text" name="Name" id="question">

    <p>Enter The Number of Options</p>
    <input type="text" name="count" id="count">

    <button type="submit">Create New Poll</button>
  </form>

  <form id="answers"></form>

  <form id="poll"></form>

  <div id="results"></div>


  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script>

    $('#initial').on('submit', function(event) {

      event.preventDefault();
      const form = $(this);
      const cnt = form.find('#count');
      const qu = form.find('#question');
      const question = $(`<div id="quest"> ${qu.val()} </div>`);

      const list = $('<ul></ul>');

      for (q = 0; q < cnt.val(); q++) {
        const li = $(`<div> <input type="text" name="answer"> </div>`)
        list.append(li);}

      const button = $(`<button> ${'Submit Answers'}</button>`);

      $('#answers').append(question);
      $('#answers').append(list);
      $('#answers').append(button); });



    // Delete the previous Intial Screen
    $('#initial').on('submit', function(event) {
      $(this).closest('form').remove(); });



    // Set up the poll
    $('#answers').on('submit', function(event){
      const form = $(this);
      event.preventDefault();

      const list = $('<ul></ul>');
      const inputs = form.find('input');
      const question = form.find('#quest')

      for (let input of inputs){
        input = $(input);
        const li = $
        (`<div> ${input.val()}
            <input type="checkbox" value=${input.val()}>
        </div>`)
        list.append(li);
        input.val('')}

      $('#poll').append(question);
      $('#poll').append(list); });


    // Delete the Answers screen
    $('#answers').on('submit', function(event) {
    $(this).closest('form').remove(); });


  </script>
</body>
